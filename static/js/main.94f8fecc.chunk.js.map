{"version":3,"sources":["opts.js","util.js","components/RatesEditor.js","conf.js","storage.js","logo.svg","Footer.js","App.js","registerServiceWorker.js","index.js"],"names":["machineHire_Off","key","text","value","machineHire_On","machineHireOptions","label","optOff","optOn","optList","defaultPrice","minPriceOptions","m2","m3","per_m2","per_m3","RateRow","handleLimitChange","event","limit","parseFloat","isNaN","props","onLimitChange","handleRateChange","rate","onRateChange","handleAdd","onAdd","handleRemove","onRemove","buttonAdd","Button","icon","onClick","this","buttonRemove","disabled","prevLimit","Table","Row","Cell","Input","type","placeholder","onChange","Group","Popup","trigger","content","Component","RatesEditor","state","rates","setState","i","thisRow","prevRow","arr","fn","curr","length","filter","generateKey","Math","round","item","slice","splice","setRates","newIdx","handleAddRow","handleRemoveRow","newLimit","newRate","rows","map","renderRow","Header","HeaderCell","name1","name2","Body","EditConfigurationPanel","handleSecretChange","secret","handleNameChange","name","updateConfiguration","handleExtraChange","handleConcreteRateChange","concreteRates","handleRockChange","rock","configuration","newObj","getConfiguration","onConfigurationChanged","displayName","inputType","label1","label2","Label","util","labelPosition","as","style","marginBottom","renderExtra","className","marginTop","Grid","columns","stackable","Column","renderExtras","ConfigurationEditorModal","open","defaultState","getDefaultState","close","handleConfigurationChange","submit","onSubmit","isEditMode","mode","isCreateMode","triggerText","primaryText","Modal","onOpen","onClose","size","Content","Actions","primary","LoadConfigurationModal","handleChange","handleLoad","searching","decode","id","ex","error","toString","handleSubmit","disabledLoad","Form","Field","renderLoading","renderError","renderLoaded","ShareConfigurationModal","overflowWrap","href","shareUrl","encodeMap","decodeMap","obj","rev","Object","keys","forEach","Error","reverseMap","renameKeys","mapper","newKey","newValue","Array","decodeConfiguration","encodedConfiguration","indexOf","start","substring","step1","decodeURIComponent","step2","base64url","toBuffer","migrateConfiguration","msgpack","getShareConfigurationUrl","window","location","protocol","host","pathname","split","encode","step3","encodeURIComponent","encodeConfiguration","keyAppState","isLocalStorageAvailable","undefined","localStorage","console","log","machineHireOn","minPrice","Footer","Segment","inverted","vertical","margin","padding","Container","List","link","Item","target","rel","slabThickness_125","slabThicknessOptions","meshThickness_SL82","meshThicknessOptions","pumpOption_On","pumpOption_Double","pumpOptions","polyMembrane_On","polyMembraneOptions","calculateArea","width","calculatePrice","amount","toFixed","FormForceMessage","force","Message","info","compact","title","message","App","isDefault","saveAppState","handleInputChange","prevState","getStateForces","slabThickness125","meshThicknessSL82","pumpOn","pumpDouble","polyMembraneOn","taxRate","slabThickness","meshThickness","meshThicknessForce","pump","pumpForce","polyMembrane","machineHire","rockForce","editConfiguration","storedAppState","json","getItem","appState","JSON","parse","warn","storage","stringify","setItem","meshThicknessForceMessage","area","rockValue","rockArea","find","getArea","findRate","getRock","tax","items","total","add","cost","addTax","push","getCurrentRate","getMeshThickness","getPump","getRockRate","hasminPrice","minPriceOffset","required","options","Select","fluid","radios","Radio","checked","inline","renderField","renderSelect","renderRadios","volume","getVolume","getTotal","textAlign","unstackable","celled","collapsing","unit","active","scale","activeRate","displays","displayValue","old","prev","generateDisplay","displayRates","display","renderRatesTable","renderConfigExtra","warning","header","renderConfigDefaultWarning","renderConfigInfo","Menu","borderless","borderRadius","Image","src","logo","marginRight","centered","mobile","tablet","computer","renderInput","Divider","renderOutput","renderConfig","Boolean","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.94f8fecc.chunk.js","sourcesContent":["const machineHire_Off = { key: 'off', text: 'Off', value: 'off' };\r\nconst machineHire_On = { key: 'on', text: 'On', value: 'on' };\r\n\r\nexport const machineHireOptions = {\r\n    label: \"Machine Hire & Cartage\",\r\n    optOff: machineHire_Off,\r\n    optOn: machineHire_On,\r\n    optList: [machineHire_Off, machineHire_On],\r\n    defaultPrice: 200\r\n};\r\n\r\nexport const minPriceOptions = {\r\n    label: \"Minimum Price\",\r\n    labelItem: 'Minimum Price Offset',\r\n    defaultPrice: 2500\r\n};\r\n","import React, { Fragment } from 'react';\r\n\r\nexport function generateKey(arr) {\r\n  const fn = (curr) => curr.key === key;\r\n\r\n  let key = arr.length;\r\n  while (true) {\r\n    if (arr.filter(fn).length === 0)\r\n      return key;\r\n    key++;\r\n  }\r\n}\r\n\r\nexport function sqm(value) {\r\n  return <Fragment>{value}m<sup>2</sup></Fragment>;\r\n}\r\n\r\nexport const m2 = <Fragment>m<sup>2</sup></Fragment>;\r\n\r\nexport const m3 = <Fragment>m<sup>3</sup></Fragment>;\r\n\r\nexport const per_m2 = <Fragment>per {m2}</Fragment>;\r\n\r\nexport const per_m3 = <Fragment>per {m3}</Fragment>;\r\n","import React, { Component } from 'react';\r\nimport { Button, Input, Popup, Table } from 'semantic-ui-react';\r\nimport { generateKey } from '../util'\r\n\r\nclass RateRow extends Component {\r\n  handleLimitChange = (event, { value }) => {\r\n    var limit = parseFloat(value);\r\n    if (!isNaN(limit)) {\r\n      this.props.onLimitChange(limit);\r\n    }\r\n  }\r\n\r\n  handleRateChange = (event, { value }) => {\r\n    var rate = parseFloat(value);\r\n    if (!isNaN(rate)) {\r\n      this.props.onRateChange(rate);\r\n    }\r\n  }\r\n\r\n  handleAdd = () => {\r\n    this.props.onAdd();\r\n  }\r\n\r\n  handleRemove = () => {\r\n    this.props.onRemove();\r\n  }\r\n\r\n  render() {\r\n    const buttonAdd = <Button icon='add' onClick={this.handleAdd} />;\r\n    const buttonRemove = <Button disabled={this.props.limit == null} icon='minus' onClick={this.handleRemove} />;\r\n\r\n    let limit;\r\n    if (this.props.limit) {\r\n      limit = this.props.limit;\r\n    }\r\n    else if (this.props.prevLimit) {\r\n      limit = `More than ${this.props.prevLimit}`;\r\n    }\r\n\r\n    return (\r\n      <Table.Row>\r\n        <Table.Cell>\r\n          <Input type='number' disabled={this.props.limit == null} value={limit} placeholder=\"...\" onChange={this.handleLimitChange} />\r\n        </Table.Cell>\r\n        <Table.Cell>\r\n          <Input type='number' label='$' value={this.props.rate} placeholder=\"...\" onChange={this.handleRateChange} />\r\n        </Table.Cell>\r\n        <Table.Cell>\r\n          <Button.Group>\r\n            <Popup trigger={buttonAdd} content=\"Insert a new line above\" />\r\n            <Popup trigger={buttonRemove} content=\"Remove this line\" />\r\n          </Button.Group>\r\n        </Table.Cell>\r\n      </Table.Row>\r\n    );\r\n  }\r\n}\r\n\r\nexport default class RatesEditor extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      rates: props.rates\r\n    };\r\n  }\r\n\r\n  setRates(rates) {\r\n    this.setState({\r\n      rates\r\n    });\r\n    this.props.onChange(rates);\r\n  }\r\n\r\n  handleAddRow(i) {\r\n    const thisRow = this.state.rates[i];\r\n    const prevRow = this.state.rates[i - 1];\r\n\r\n    const key = generateKey(this.state.rates);\r\n\r\n    let limit;\r\n    if (thisRow.limit === null) {\r\n      if (prevRow) {\r\n        limit = prevRow.limit * 2;\r\n      }\r\n      else {\r\n        limit = 10;\r\n      }\r\n    }\r\n    else if (prevRow) {\r\n      limit = (thisRow.limit + prevRow.limit) / 2;\r\n    }\r\n    else {\r\n      limit = thisRow.limit / 2;\r\n    }\r\n    limit = Math.round(limit);\r\n\r\n    let rate;\r\n    if (prevRow) {\r\n      rate = Math.round((thisRow.rate + prevRow.rate) / 2);\r\n    }\r\n    else {\r\n      rate = Math.round(thisRow.rate * 1.5);\r\n    }\r\n    rate = Math.round(rate);\r\n\r\n    const item = { key, limit, rate };\r\n\r\n    const rates = this.state.rates.slice();\r\n    rates.splice(i, 0, item);\r\n\r\n    this.setRates(rates);\r\n  }\r\n\r\n  handleRemoveRow(i) {\r\n    const rates = this.state.rates.slice();\r\n\r\n    rates.splice(i, 1);\r\n\r\n    this.setRates(rates);\r\n  }\r\n\r\n  handleLimitChange(i, limit) {\r\n    const rates = this.state.rates.slice();\r\n\r\n    var item = {\r\n      ...rates[i],\r\n      limit\r\n    };\r\n\r\n    rates.splice(i, 1);\r\n\r\n    var newIdx = rates.length - 1;\r\n    while (newIdx > 0 && limit < rates[newIdx - 1].limit) {\r\n      newIdx--;\r\n    }\r\n\r\n    rates.splice(newIdx, 0, item);\r\n\r\n    this.setRates(rates);\r\n  }\r\n\r\n  handleRateChange(i, rate) {\r\n    const rates = this.state.rates.slice();\r\n\r\n    var item = {\r\n      ...rates[i],\r\n      rate\r\n    };\r\n\r\n    rates.splice(i, 1, item);\r\n\r\n    this.setRates(rates);\r\n  }\r\n\r\n  renderRow(i) {\r\n    const rates = this.state.rates;\r\n    const prevLimit = (i > 0 ? rates[i - 1].limit : null);\r\n\r\n    return (\r\n      <RateRow\r\n        key={rates[i].key}\r\n        limit={rates[i].limit}\r\n        rate={rates[i].rate}\r\n        prevLimit={prevLimit}\r\n        onAdd={() => this.handleAddRow(i)}\r\n        onRemove={() => this.handleRemoveRow(i)}\r\n        onLimitChange={(newLimit) => this.handleLimitChange(i, newLimit)}\r\n        onRateChange={(newRate) => this.handleRateChange(i, newRate)}\r\n      />\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const rows = this.state.rates.map((value, i) => this.renderRow(i));\r\n\r\n    return (\r\n      <Table>\r\n        <Table.Header>\r\n          <Table.Row>\r\n            <Table.HeaderCell>{this.props.name1}</Table.HeaderCell>\r\n            <Table.HeaderCell>{this.props.name2}</Table.HeaderCell>\r\n            <Table.HeaderCell>Actions</Table.HeaderCell>\r\n          </Table.Row>\r\n        </Table.Header>\r\n        <Table.Body>\r\n          {rows}\r\n        </Table.Body>\r\n      </Table>\r\n    )\r\n  }\r\n}\r\n","import React, { Component, Fragment } from 'react';\r\nimport { Button, Form, Header, Input, Grid, Label, Modal, Table } from 'semantic-ui-react';\r\nimport { machineHireOptions, minPriceOptions } from './opts';\r\nimport * as util from './util';\r\nimport RatesEditor from './components/RatesEditor';\r\nimport './conf.css';\r\n\r\nexport function generateDisplay(rates, displayValue) {\r\n  let old = null;\r\n\r\n  return rates.map(value => {\r\n    const prev = old;\r\n    old = value;\r\n\r\n    if (rates.length === 1) {\r\n      return <Fragment>Any amount</Fragment>;\r\n    }\r\n\r\n    if (prev === null) {\r\n      return <Fragment>Less than {value.limit}{displayValue}</Fragment>;\r\n    }\r\n\r\n    if (value.limit === null) {\r\n      return <Fragment>Over {prev.limit}{displayValue}</Fragment>;\r\n    }\r\n\r\n    return <Fragment>{prev.limit}{displayValue} to {value.limit}{displayValue}</Fragment>;\r\n  });\r\n}\r\n\r\nexport function generateDefaultConfiguration() {\r\n  return {\r\n    id: null,\r\n    isDefault: true,\r\n    name: \"Default\",\r\n    concreteRates: [\r\n      { key: 0, limit: 10, rate: 20 },\r\n      { key: 1, limit: 20, rate: 18 },\r\n      { key: 2, limit: 40, rate: 15 },\r\n      { key: 3, limit: 60, rate: 10 },\r\n      { key: 4, limit: 120, rate: 8 },\r\n      { key: 5, limit: null, rate: 5 },\r\n    ],\r\n    slabThickness125: 1,\r\n    meshThicknessSL82: 2,\r\n    pumpOn: 25,\r\n    pumpDouble: 50,\r\n    polyMembraneOn: 2,\r\n    machineHireOn: machineHireOptions.defaultPrice,\r\n    rock: [\r\n      { key: 0, limit: 100, rate: 10 },\r\n      { key: 1, limit: null, rate: 5 }\r\n    ],\r\n    taxRate: 10,\r\n    minPrice: minPriceOptions.defaultPrice\r\n  };\r\n}\r\n\r\nexport class EditConfigurationPanel extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      configuration: props.configuration,\r\n      secret: null\r\n    };\r\n  }\r\n\r\n  getConfiguration() {\r\n    return this.state.configuration;\r\n  }\r\n\r\n  updateConfiguration(newObj) {\r\n    const configuration = {\r\n      ...this.getConfiguration(),\r\n      ...newObj\r\n    };\r\n\r\n    this.setState({ configuration: configuration });\r\n\r\n    this.props.onConfigurationChanged(configuration);\r\n  }\r\n\r\n  handleSecretChange = (secret) => {\r\n    this.setState({\r\n      secret: secret\r\n    });\r\n  }\r\n\r\n  handleNameChange = (event, { name, value }) => {\r\n    this.updateConfiguration({\r\n      [name]: value\r\n    });\r\n  }\r\n\r\n  handleExtraChange = (event, { name, value }) => {\r\n    value = parseFloat(value);\r\n    if (isNaN(value)) {\r\n      value = 0;\r\n    }\r\n\r\n    this.updateConfiguration({\r\n      [name]: value\r\n    });\r\n  }\r\n\r\n  handleConcreteRateChange = (rates) => {\r\n    this.updateConfiguration({\r\n      concreteRates: rates\r\n    });\r\n  }\r\n\r\n  handleRockChange = (rates) => {\r\n    this.updateConfiguration({\r\n      rock: rates\r\n    });\r\n  }\r\n\r\n  /**\r\n   * @param {string} name \r\n   * @param {string} displayName \r\n   * @param {'ea' | 'm2' | 'm3' | 'pct'} inputType \r\n   */\r\n  renderExtra(name, displayName, inputType) {\r\n    const configuration = this.getConfiguration();\r\n    const value = configuration[name];\r\n\r\n    let label1, label2;\r\n    if (inputType === 'ea') {\r\n      label1 = <Label>$</Label>;\r\n    }\r\n    else if (inputType === 'm2') {\r\n      displayName = <Fragment>{displayName} ({util.per_m2})</Fragment>;\r\n      label1 = <Label>$</Label>;\r\n    }\r\n    else if (inputType === 'm3') {\r\n      displayName = <Fragment>{displayName} ({util.per_m3})</Fragment>;\r\n      label1 = <Label>$</Label>;\r\n    }\r\n    else { // pct\r\n      label2 = <Label>%</Label>;\r\n    }\r\n\r\n    const labelPosition = (label2 ? 'right' : 'left');\r\n\r\n    return (\r\n      <Table.Row>\r\n        <Table.Cell>\r\n          {displayName}\r\n        </Table.Cell>\r\n        <Table.Cell>\r\n          <Input name={name} type='number' labelPosition={labelPosition} value={value} onChange={this.handleExtraChange}>\r\n            {label1}\r\n            <input />\r\n            {label2}\r\n          </Input>\r\n        </Table.Cell>\r\n      </Table.Row>\r\n    )\r\n  }\r\n\r\n  renderExtras() {\r\n    return (\r\n      <Fragment>\r\n        <Header as='h4'>Extras</Header>\r\n        <Table style={{ marginBottom: '1rem' }}>\r\n          <Table.Header>\r\n            <Table.Row>\r\n              <Table.HeaderCell>Name</Table.HeaderCell>\r\n              <Table.HeaderCell>Amount</Table.HeaderCell>\r\n            </Table.Row>\r\n          </Table.Header>\r\n          <Table.Body>\r\n            {this.renderExtra(\"slabThickness125\", \"Slab Thickness 125mm\", \"m2\")}\r\n            {this.renderExtra(\"meshThicknessSL82\", \"Mesh Thickness SL82\", \"m2\")}\r\n            {this.renderExtra(\"polyMembraneOn\", \"Poly Membrane\", \"m2\")}\r\n            {this.renderExtra(\"machineHireOn\", machineHireOptions.label, \"ea\")}\r\n            {this.renderExtra(\"pumpOn\", \"Pump\", \"ea\")}\r\n            {this.renderExtra(\"pumpDouble\", \"Pump (Double)\", \"ea\")}\r\n            {this.renderExtra(\"taxRate\", \"Tax Rate\", \"pct\")}\r\n            {this.renderExtra(\"minPrice\", minPriceOptions.label, \"ea\")}\r\n          </Table.Body>\r\n        </Table>\r\n      </Fragment>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    const configuration = this.getConfiguration();\r\n\r\n    return (\r\n      <Fragment>\r\n        <Header as='h4'>Configuration Name</Header>\r\n        <Input name='name' type='text' placeholder='Configuration Name' value={configuration.name} onChange={this.handleNameChange} />\r\n        <div className='fix-grid-margins' style={{ marginTop: '1rem' }}>\r\n          <Grid columns='2' stackable>\r\n            <Grid.Column>\r\n              <Header as='h4'>Concrete Rates</Header>\r\n              <RatesEditor name1='Concrete' name2={<Fragment>Rate per m<sup>2</sup></Fragment>}\r\n                rates={configuration.concreteRates} onChange={this.handleConcreteRateChange} />\r\n              <Header as='h4'>Rock Rates</Header>\r\n              <RatesEditor name1='Rock' name2={<Fragment>Rate per {util.per_m3}</Fragment>}\r\n                rates={configuration.rock} onChange={this.handleRockChange}\r\n              />\r\n            </Grid.Column>\r\n            <Grid.Column>\r\n              {this.renderExtras()}\r\n            </Grid.Column>\r\n          </Grid>\r\n        </div>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport class ConfigurationEditorModal extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = this.getDefaultState();\r\n\r\n    this.isEditMode = (props.mode === 'edit');\r\n    this.isCreateMode = (props.mode === 'create');\r\n  }\r\n\r\n  getDefaultState() {\r\n    return {\r\n      open: false,\r\n      configuration: this.props.configuration,\r\n      secret: this.props.secret\r\n    };\r\n  }\r\n\r\n  open = () => {\r\n    const defaultState = this.getDefaultState();\r\n\r\n    this.setState({\r\n      ...defaultState,\r\n      open: true\r\n    });\r\n  }\r\n\r\n  close = () => {\r\n    this.setState({\r\n      open: false\r\n    });\r\n  }\r\n\r\n  handleConfigurationChange = (configuration) => {\r\n    this.setState({ configuration });\r\n  }\r\n\r\n  submit = () => {\r\n    this.props.onSubmit(this.state.configuration);\r\n    this.close();\r\n  }\r\n\r\n  render() {\r\n    const triggerText = (this.isEditMode ? \"Edit Configuration\" : \"New Configuration\");\r\n    const trigger = <Button>{triggerText}</Button>;\r\n\r\n    const primaryText = (this.isEditMode ? \"Save Changes\" : \"Create\");\r\n\r\n    return (\r\n      <Modal open={this.state.open} onOpen={this.open} onClose={this.close} trigger={trigger} size='fullscreen'>\r\n        <Modal.Header>{triggerText}</Modal.Header>\r\n        <Modal.Content>\r\n          <EditConfigurationPanel configuration={this.state.configuration} onConfigurationChanged={this.handleConfigurationChange} />\r\n        </Modal.Content>\r\n        <Modal.Actions>\r\n          <Button primary onClick={this.submit}>{primaryText}</Button>\r\n          <Button onClick={this.close}>Cancel</Button>\r\n        </Modal.Actions>\r\n      </Modal>\r\n    );\r\n  }\r\n}\r\n\r\nexport class LoadConfigurationModal extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = this.getDefaultState(false);\r\n  }\r\n\r\n  getDefaultState(open) {\r\n    return {\r\n      open: open,\r\n      id: null,\r\n      configuration: null,\r\n      searching: false,\r\n      error: null\r\n    };\r\n  }\r\n\r\n  open = () => {\r\n    const defaultState = this.getDefaultState(true);\r\n\r\n    this.setState({\r\n      ...defaultState\r\n    });\r\n  }\r\n\r\n  close = () => {\r\n    this.setState({\r\n      open: false\r\n    });\r\n  }\r\n\r\n  handleChange = (event, { name, value }) => {\r\n    this.setState({\r\n      [name]: value\r\n    });\r\n  }\r\n\r\n  handleLoad = () => {\r\n    this.setState({\r\n      searching: true,\r\n      configuration: null\r\n    });\r\n\r\n    let configuration = null;\r\n    try {\r\n      configuration = this.props.decode(this.state.id);\r\n    }\r\n    catch (ex) {\r\n      this.setState({\r\n        error: ex.toString()\r\n      });\r\n    }\r\n\r\n    this.setState({\r\n      searching: false,\r\n      configuration\r\n    });\r\n  }\r\n\r\n  handleSubmit = () => {\r\n    this.props.onSubmit(this.state.configuration);\r\n    this.close();\r\n  }\r\n\r\n  renderLoading() {\r\n    if (!this.state.searching) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <p>Searching...</p>\r\n    );\r\n  }\r\n\r\n  renderError() {\r\n    if (this.state.error === null) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <p>Error: <b>{this.state.error}</b></p>\r\n    );\r\n  }\r\n\r\n  renderLoaded() {\r\n    if (this.state.configuration === null) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <p>Configuration Loaded: <b>{this.state.configuration.name}</b></p>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const trigger = <Button>Load Configuration</Button>;\r\n    const disabledLoad = this.state.configuration === null;\r\n\r\n    return (\r\n      <Modal open={this.state.open} onOpen={this.open} onClose={this.close} trigger={trigger}>\r\n        <Modal.Header>Load Configuration</Modal.Header>\r\n        <Modal.Content>\r\n          <Form>\r\n            <Form.Field>\r\n              <label>Share URL</label>\r\n              <Input name=\"id\" type='text' placeholder='Enter Share URL' onChange={this.handleChange} />\r\n            </Form.Field>\r\n            <Button onClick={this.handleLoad}>Search</Button>\r\n            {this.renderLoading()}\r\n            {this.renderError()}\r\n            {this.renderLoaded()}\r\n          </Form>\r\n        </Modal.Content>\r\n        <Modal.Actions>\r\n          <Button primary onClick={this.handleSubmit} disabled={disabledLoad}>Load</Button>\r\n          <Button onClick={this.close}>Cancel</Button>\r\n        </Modal.Actions>\r\n      </Modal>\r\n    );\r\n  }\r\n}\r\n\r\nexport class ShareConfigurationModal extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      open: false\r\n    };\r\n  }\r\n\r\n  open = () => {\r\n    this.setState({\r\n      open: true\r\n    });\r\n  }\r\n\r\n  close = () => {\r\n    this.setState({\r\n      open: false\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Modal open={this.state.open} onOpen={this.open} onClose={this.close} trigger={<Button disabled={this.props.disabled}>Share Configuration</Button>}>\r\n        <Modal.Header>Share Configuration</Modal.Header>\r\n        <Modal.Content>\r\n          <p>You can share this configuration via:</p>\r\n          <p><a style={{ overflowWrap: 'break-word' }} href={this.props.shareUrl}>{this.props.shareUrl}</a></p>\r\n        </Modal.Content>\r\n        <Modal.Actions>\r\n          <Button onClick={this.close}>OK</Button>\r\n        </Modal.Actions>\r\n      </Modal>\r\n    );\r\n  }\r\n}\r\n","import base64url from 'base64url';\r\nimport msgpack from 'msgpack-lite';\r\nimport { machineHireOptions, minPriceOptions } from './opts';\r\n\r\nconst encodeMap = {\r\n  'isDefault': 'e',\r\n  'name': 'n',\r\n  'concreteRates': 'c',\r\n  'key': 'k',\r\n  'limit': 'l',\r\n  'rate': 'r',\r\n  'slabThickness125': 's',\r\n  'meshThicknessSL82': 'm',\r\n  'pumpOn': 'p',\r\n  'pumpDouble': 'd',\r\n  'polyMembraneOn': 'b',\r\n  'machineHireOn': 'h',\r\n  'rock': 'o',\r\n  'taxRate': 't',\r\n  'minPrice': 'i'\r\n};\r\n\r\nconst decodeMap = reverseMap(encodeMap);\r\n\r\nfunction renameKeys(obj, mapper) {\r\n  let newObj = {};\r\n  Object.keys(obj).forEach(key => {\r\n    const value = obj[key];\r\n    const newKey = mapper[key] || key;\r\n\r\n    let newValue = value;\r\n    if (value instanceof Array) {\r\n      newValue = value.map(curr => renameKeys(curr, mapper));\r\n    }\r\n    else if (value instanceof Object) {\r\n      newValue = renameKeys(value, mapper);\r\n    }\r\n\r\n    newObj[newKey] = newValue;\r\n  });\r\n  return newObj;\r\n}\r\n\r\nfunction reverseMap(obj) {\r\n  let rev = {};\r\n  Object.keys(obj).forEach(key => {\r\n    const value = obj[key];\r\n    if (rev[value]) {\r\n      throw new Error(`duplicate value found for ${rev[value]} and ${key}`);\r\n    }\r\n    rev[value] = key;\r\n  });\r\n  return rev;\r\n}\r\n\r\nexport function encodeConfiguration(configuration) {\r\n  // renameKeys -> msgpack -> base64url -> uri\r\n  const step1 = renameKeys(configuration, encodeMap);\r\n  const step2 = msgpack.encode(step1);\r\n  const step3 = base64url.encode(step2);\r\n  const step4 = encodeURIComponent(step3);\r\n\r\n  return step4;\r\n}\r\n\r\nexport function decodeConfiguration(encodedConfiguration) {\r\n  // allow decoding of share urls\r\n  const i = encodedConfiguration.indexOf('?cfg=');\r\n  if (i !== -1) {\r\n    const start = i + '?cfg='.length;\r\n    encodedConfiguration = encodedConfiguration.substring(start);\r\n  }\r\n\r\n  // uri -> base64url -> msgpack -> renameKeys\r\n  const step1 = decodeURIComponent(encodedConfiguration);\r\n  const step2 = base64url.toBuffer(step1);\r\n  const step3 = msgpack.decode(step2);\r\n  const step4 = renameKeys(step3, decodeMap);\r\n\r\n  // finally, migrate\r\n  const configuration = migrateConfiguration(step4);\r\n\r\n  return configuration;\r\n}\r\n\r\nexport function getShareConfigurationUrl(configuration) {\r\n  const baseUrl = window.location.protocol + \"//\" + window.location.host + \"/\" + window.location.pathname.split('/')[1];\r\n  return baseUrl + '?cfg=' + encodeConfiguration(configuration);\r\n}\r\n\r\nexport function isShareUrl(configurationString) {\r\n  return configurationString.indexOf('?cfg=') !== -1;\r\n}\r\n\r\nconst keyAppState = \"appState\";\r\n\r\nfunction isLocalStorageAvailable() {\r\n  return window.localStorage !== undefined;\r\n}\r\n\r\nexport function getStoredAppState() {\r\n  if (!isLocalStorageAvailable()) {\r\n    return null;\r\n  }\r\n\r\n  const json = localStorage.getItem(keyAppState);\r\n  if (json !== null) {\r\n    try {\r\n      const appState = JSON.parse(json);\r\n      appState.configuration = migrateConfiguration(appState.configuration);\r\n\r\n      // setup machineHire\r\n      if (appState.machineHire === undefined)\r\n      {\r\n        appState.machineHire = machineHireOptions.optList[0].value;\r\n      }\r\n      return appState;\r\n    }\r\n    catch (error) {\r\n      console.log(\"could not load stored configuration, see below\");\r\n      console.warn(error);\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\nexport function setStoredAppState(appState) {\r\n  if (!isLocalStorageAvailable()) {\r\n    return;\r\n  }\r\n\r\n  // Remove rockForce from appState (pollutes state--but ultimately harmless)\r\n  const { rockForce, ...storedAppState } = appState;\r\n\r\n  const json = JSON.stringify(storedAppState);\r\n  localStorage.setItem(keyAppState, json);\r\n}\r\n\r\nexport function migrateConfiguration(configuration) {\r\n  // migrate rock: number to a rates system (like concreteRates)\r\n  if (typeof configuration.rock === 'number') {\r\n    console.log(\"migrateConfiguration: rock rates system\");\r\n    const rock = configuration.rock;\r\n    configuration = {\r\n      ...configuration,\r\n      rock: [\r\n        {\r\n          key: 0,\r\n          limit: null,\r\n          rate: rock\r\n        }\r\n      ]\r\n    };\r\n  }\r\n\r\n  // Add machineHireOn\r\n  if (configuration.machineHireOn === undefined) {\r\n    configuration = {\r\n      ...configuration,\r\n      machineHireOn: machineHireOptions.defaultPrice\r\n    };\r\n  }\r\n\r\n  // Add minPrice\r\n  if (configuration.minPrice === undefined) {\r\n    configuration = {\r\n      ...configuration,\r\n      minPrice: minPriceOptions.defaultPrice\r\n    };\r\n  }\r\n\r\n  return configuration;\r\n}\r\n","export default __webpack_public_path__ + \"static/media/logo.2d27ead7.svg\";","import React from 'react';\r\nimport { Container, Header, List, Segment } from 'semantic-ui-react';\r\n\r\nexport function Footer(props) {\r\n  return (\r\n    <Segment inverted vertical style={{ margin: '2em 0em 0em', padding: '2em 0em' }}>\r\n      <Container>\r\n        <Header inverted as='h4' content='Help' />\r\n        <List link inverted>\r\n          <List.Item as='a' target=\"_blank\" rel=\"noopener noreferrer\" href='https://github.com/talanc/concrete-app/blob/master/docs/sharing-configurations.md'>Sharing Configurations</List.Item>\r\n          <List.Item as='a' target=\"_blank\" rel=\"noopener noreferrer\" href='https://github.com/talanc/concrete-app'>Source</List.Item>\r\n        </List>\r\n      </Container>\r\n    </Segment>\r\n  );\r\n}\r\n\r\nexport default Footer;","import React, { Component, Fragment } from 'react';\r\nimport { Container, Divider, Form, Header, Image, Grid, Message, Menu, Table } from 'semantic-ui-react';\r\nimport { generateDefaultConfiguration, generateDisplay } from './conf';\r\nimport * as conf from './conf';\r\nimport * as storage from './storage';\r\nimport * as util from './util';\r\nimport { machineHireOptions, minPriceOptions } from './opts';\r\nimport logo from './logo.svg';\r\nimport Footer from './Footer';\r\nimport './App.css';\r\n\r\nconst slabThickness_100 = { key: '100', text: '100mm', value: 100 };\r\nconst slabThickness_125 = { key: '125', text: '125mm', value: 125 };\r\n\r\nconst slabThicknessOptions = [slabThickness_100, slabThickness_125];\r\n\r\nconst meshThickness_SL72 = { key: 'SL72', text: 'SL72', value: 'SL72' };\r\nconst meshThickness_SL82 = { key: 'SL82', text: 'SL82', value: 'SL82' };\r\n\r\nconst meshThicknessOptions = [meshThickness_SL72, meshThickness_SL82];\r\n\r\nconst pumpOption_Off = { key: 'off', text: \"Off\", value: 'off' };\r\nconst pumpOption_On = { key: 'on', text: \"On\", value: 'on' };\r\nconst pumpOption_Double = { key: 'double', text: \"Double\", value: 'double' };\r\n\r\nconst pumpOptions = [pumpOption_Off, pumpOption_On, pumpOption_Double];\r\n\r\nconst polyMembrane_Off = { key: 'off', text: \"Off\", value: 'off' };\r\nconst polyMembrane_On = { key: 'on', text: \"On\", value: 'on' };\r\n\r\nconst polyMembraneOptions = [polyMembrane_Off, polyMembrane_On];\r\n\r\nfunction getDefaultAppState() {\r\n  return {\r\n    configuration: generateDefaultConfiguration(),\r\n    width: 6,\r\n    length: 9,\r\n    slabThickness: slabThicknessOptions[0].value,\r\n    meshThickness: meshThicknessOptions[0].value,\r\n    meshThicknessForce: null,\r\n    pump: pumpOptions[0].value,\r\n    pumpForce: null,\r\n    polyMembrane: polyMembraneOptions[0].value,\r\n    machineHire: machineHireOptions.optList[0].value,\r\n    rock: 0,\r\n    rockForce: null,\r\n    editConfiguration: false\r\n  }\r\n}\r\n\r\nfunction calculateArea(width, length) {\r\n  return width * length;\r\n}\r\n\r\nfunction calculatePrice(amount) {\r\n  return \"$\" + amount.toFixed(2);\r\n}\r\n\r\nfunction FormForceMessage(props) {\r\n  if (!props.force) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Form.Group>\r\n      <Message info compact size='small' style={{ padding: '0.5em 1em', marginTop: '0.25em', marginBottom: '1em' }}>\r\n        <b>{props.force.title}:</b> {props.force.message}\r\n      </Message>\r\n    </Form.Group>\r\n  );\r\n}\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    // load initial state\r\n    this.state = getDefaultAppState();\r\n\r\n    // load job + configuration\r\n    const storedAppState = storage.getStoredAppState();\r\n    if (storedAppState !== null) {\r\n      this.state = storedAppState;\r\n    }\r\n\r\n    // load configuration from url\r\n    if (storage.isShareUrl(window.location.href)) {\r\n      try {\r\n        this.state.configuration = storage.decodeConfiguration(window.location.href);\r\n      }\r\n      catch (error) {\r\n        console.log('could not load from url bar, see details below');\r\n        console.error(error);\r\n      }\r\n    }\r\n\r\n    // update forces\r\n    this.state = {\r\n      ...this.state,\r\n      ...this.getStateForces(this.state)\r\n    };\r\n  }\r\n\r\n  handleConfigurationChange = (configuration) => {\r\n    configuration = {\r\n      ...configuration,\r\n      isDefault: false\r\n    };\r\n\r\n    this.setState({\r\n      configuration\r\n    });\r\n\r\n    this.saveAppState();\r\n  }\r\n\r\n  handleInputChange = (event, { name, value }) => {\r\n    this.setState({\r\n      [name]: value\r\n    });\r\n\r\n    this.setState(prevState => {\r\n      const forces = this.getStateForces(prevState);\r\n      return forces;\r\n    });\r\n\r\n    this.saveAppState();\r\n  }\r\n\r\n  saveAppState() {\r\n    this.setState(prevState => {\r\n      storage.setStoredAppState(prevState);\r\n    });\r\n  }\r\n\r\n  getStateForces(prevState) {\r\n    const area = calculateArea(prevState.width, prevState.length);\r\n\r\n    let meshThicknessForceMessage;\r\n    if (prevState.width > 12 && prevState.length) {\r\n      meshThicknessForceMessage = \"Width > 12m, Length > 12m\";\r\n    }\r\n    else if (prevState.width > 12) {\r\n      meshThicknessForceMessage = \"Width > 12m\";\r\n    }\r\n    else if (prevState.length > 12) {\r\n      meshThicknessForceMessage = \"Length > 12m\";\r\n    }\r\n\r\n    let meshThicknessForce;\r\n    if (meshThicknessForceMessage) {\r\n      meshThicknessForce = {\r\n        value: meshThickness_SL82.value,\r\n        title: \"Forced to SL82\",\r\n        message: <Fragment>{meshThicknessForceMessage}</Fragment>\r\n      };\r\n    }\r\n\r\n    let pumpForce = null;\r\n    if (area > 350) {\r\n      pumpForce = {\r\n        value: pumpOption_Double.value,\r\n        title: \"Forced to Double\",\r\n        message: <Fragment>Area &gt; 350m<sup>2</sup></Fragment>\r\n      };\r\n    }\r\n    else if (area > 125) {\r\n      pumpForce = {\r\n        value: pumpOption_On.value,\r\n        title: \"Forced to On\",\r\n        message: <Fragment>Area &gt; 350m<sup>2</sup></Fragment>\r\n      };\r\n    }\r\n\r\n    let rockValue, rockArea;\r\n    if (area > 250) {\r\n      rockValue = 30;\r\n      rockArea = 250;\r\n    }\r\n    else if (area > 150) {\r\n      rockValue = 20;\r\n      rockArea = 150;\r\n    }\r\n    else if (area > 100) {\r\n      rockValue = 10;\r\n      rockArea = 100;\r\n    }\r\n\r\n    let rockForce;\r\n    if (rockValue) {\r\n      rockForce = {\r\n        value: rockValue,\r\n        title: \"Forced Rock\",\r\n        message: <Fragment>Area &gt; {util.sqm(rockArea)}</Fragment>\r\n      };\r\n    }\r\n\r\n    return {\r\n      meshThicknessForce: meshThicknessForce,\r\n      pumpForce: pumpForce,\r\n      rockForce\r\n    };\r\n  }\r\n\r\n  getConfiguration() {\r\n    return this.state.configuration;\r\n  }\r\n\r\n  findRate(limit, rates) {\r\n    let rate = rates.find(rate => {\r\n      return limit < rate.limit\r\n    });\r\n    if (rate == null) {\r\n      rate = rates[rates.length - 1];\r\n    }\r\n\r\n    return rate;\r\n  }\r\n\r\n  getCurrentRate() {\r\n    const area = this.getArea();\r\n    const configuration = this.getConfiguration();\r\n\r\n    return this.findRate(area, configuration.concreteRates);\r\n  }\r\n\r\n  getRockRate() {\r\n    const configuration = this.getConfiguration();\r\n\r\n    return this.findRate(this.getRock(), configuration.rock);\r\n  }\r\n\r\n  getMeshThickness() {\r\n    return this.state.meshThicknessForce ? this.state.meshThicknessForce.value : this.state.meshThickness;\r\n  }\r\n\r\n  getPump() {\r\n    return this.state.pumpForce ? this.state.pumpForce.value : this.state.pump;\r\n  }\r\n\r\n  getRock() {\r\n    return this.state.rockForce ? this.state.rockForce.value : this.state.rock;\r\n  }\r\n\r\n  getArea() {\r\n    return calculateArea(this.state.width, this.state.length);\r\n  }\r\n\r\n  getVolume() {\r\n    return this.getArea() * (this.state.slabThickness / 1000);\r\n  }\r\n\r\n  getTotal() {\r\n    const configuration = this.getConfiguration();\r\n    const tax = configuration.taxRate / 100;\r\n\r\n    let items = [];\r\n    let total = 0;\r\n    function add(item, cost, addTax = true) {\r\n      if (addTax) {\r\n        cost = cost + cost * tax;\r\n      }\r\n      items.push({ item: item, cost: cost });\r\n      total += cost;\r\n    }\r\n\r\n    const area = this.getArea();\r\n\r\n    const rate = this.getCurrentRate();\r\n    add(\"Base Slab\", area * rate.rate);\r\n\r\n    if (this.state.slabThickness === slabThickness_125.value) {\r\n      add(\"125mm Upgrade\", area * configuration.slabThickness125);\r\n    }\r\n\r\n    if (this.getMeshThickness() === meshThickness_SL82.value) {\r\n      add(\"SL82 Upgrade\", area * configuration.meshThicknessSL82);\r\n    }\r\n\r\n    if (this.state.polyMembrane === polyMembrane_On.value) {\r\n      add(\"Poly Membrane\", area * configuration.polyMembraneOn);\r\n    }\r\n\r\n    const pump = this.getPump();\r\n    if (pump === pumpOption_On.value) {\r\n      add(\"Pump\", configuration.pumpOn);\r\n    }\r\n    if (pump === pumpOption_Double.value) {\r\n      add(\"Pump (Double)\", configuration.pumpDouble);\r\n    }\r\n\r\n    if (this.state.machineHire === machineHireOptions.optOn.value) {\r\n      add(machineHireOptions.label, configuration.machineHireOn)\r\n    }\r\n\r\n    const rock = this.getRock();\r\n    if (rock > 0) {\r\n      add(\"Rock\", rock * this.getRockRate().rate);\r\n    }\r\n\r\n    let hasminPrice = false;\r\n    const minPrice = configuration.minPrice;\r\n    const minPriceOffset = minPrice - total;\r\n    if (minPriceOffset > 0) {\r\n      hasminPrice = true;\r\n      add(minPriceOptions.labelItem, minPriceOffset, false);\r\n    }\r\n\r\n    return {\r\n      items: items,\r\n      total: total,\r\n      hasminPrice\r\n    };\r\n  }\r\n\r\n  renderField(name, value, label, force) {\r\n    if (force) {\r\n      value = force.value;\r\n    }\r\n\r\n    return (\r\n      <Fragment>\r\n        <Form.Input name={name} required type='number' value={value} label={label} onChange={this.handleInputChange} />\r\n        <FormForceMessage force={force} />\r\n      </Fragment>\r\n    );\r\n  }\r\n\r\n  renderSelect(name, value, label, options, force) {\r\n    if (force) {\r\n      value = force.value;\r\n    }\r\n\r\n    return (\r\n      <Fragment>\r\n        <Form.Select name={name} label={label} options={options} value={value} fluid onChange={this.handleInputChange} />\r\n        <FormForceMessage force={force} />\r\n      </Fragment>\r\n    );\r\n  }\r\n\r\n  renderRadios(name, value, label, options, force) {\r\n    if (force) {\r\n      value = force.value;\r\n    }\r\n\r\n    const radios = options.map(curr => <Form.Radio key={curr.key} name={name} label={curr.text} value={curr.value} checked={value === curr.value} onChange={this.handleInputChange} />);\r\n\r\n    return (\r\n      <Fragment>\r\n        <Form.Group inline>\r\n          <label>{label}</label>\r\n          {radios}\r\n        </Form.Group>\r\n        <FormForceMessage force={force} />\r\n      </Fragment>\r\n    );\r\n  }\r\n\r\n  renderInput() {\r\n    return (\r\n      <Fragment>\r\n        <Header as='h2'>Input</Header>\r\n        <Form>\r\n          {this.renderField(\"width\", this.state.width, 'Shed Width (m)', null)}\r\n          {this.renderField(\"length\", this.state.length, 'Shed Length (m)', null)}\r\n          {this.renderSelect(\"slabThickness\", this.state.slabThickness, 'Slab Thickness', slabThicknessOptions, null)}\r\n          {this.renderSelect(\"meshThickness\", this.state.meshThickness, 'Mesh Thickness', meshThicknessOptions, this.state.meshThicknessForce)}\r\n          {this.renderRadios(\"pump\", this.state.pump, 'Concrete Pump', pumpOptions, this.state.pumpForce)}\r\n          {this.renderRadios(\"polyMembrane\", this.state.polyMembrane, 'Poly Membrane', polyMembraneOptions, null)}\r\n          {this.renderRadios(\"machineHire\", this.state.machineHire, machineHireOptions.label, machineHireOptions.optList, null)}\r\n          {this.renderField(\"rock\", this.state.rock, <label>Rock {util.per_m3}</label>, this.state.rockForce)}\r\n        </Form>\r\n      </Fragment>\r\n    );\r\n  }\r\n\r\n  renderOutput() {\r\n    const area = this.getArea();\r\n    const volume = this.getVolume();\r\n    const total = this.getTotal();\r\n\r\n    const items = total.items.map(item => {\r\n      return (\r\n        <Table.Row key={item.item}>\r\n          <Table.Cell textAlign='right'>{item.item}</Table.Cell>\r\n          <Table.Cell>{calculatePrice(item.cost)}</Table.Cell>\r\n        </Table.Row>\r\n      );\r\n    });\r\n\r\n    return (\r\n      <Fragment>\r\n        <Header as='h2'>Output</Header>\r\n        <p>Area = {area.toFixed(2)}m<sup>2</sup></p>\r\n        <p>Volume = {volume.toFixed(2)}m<sup>3</sup></p>\r\n        <Header as='h3'>Itemised Prices</Header>\r\n        <Table unstackable celled>\r\n          <Table.Header>\r\n            <Table.Row>\r\n              <Table.HeaderCell>Item</Table.HeaderCell>\r\n              <Table.HeaderCell collapsing>Price</Table.HeaderCell>\r\n            </Table.Row>\r\n          </Table.Header>\r\n          <Table.Body>\r\n            {items}\r\n          </Table.Body>\r\n          <Table.Footer>\r\n            <Table.Row>\r\n              <Table.HeaderCell textAlign='right'><b>Total</b></Table.HeaderCell>\r\n              <Table.HeaderCell textAlign='right'><b>{calculatePrice(total.total)}</b></Table.HeaderCell>\r\n            </Table.Row>\r\n          </Table.Footer>\r\n        </Table>\r\n      </Fragment>\r\n    )\r\n  }\r\n\r\n  renderConfigExtra(name, value, unit, active) {\r\n    if (unit === 'ea') {\r\n      value = calculatePrice(value);\r\n    }\r\n    else if (unit === 'm2') {\r\n      value = <Fragment>{calculatePrice(value)} {util.per_m2}</Fragment>;\r\n    }\r\n    else if (unit === 'm3') {\r\n      value = <Fragment>{calculatePrice(value)} {util.per_m3}</Fragment>;\r\n    }\r\n\r\n    return (\r\n      <Table.Row key={name} active={active}>\r\n        <Table.Cell>{name}</Table.Cell>\r\n        <Table.Cell>{value}</Table.Cell>\r\n      </Table.Row>\r\n    );\r\n  }\r\n\r\n  renderRatesTable(name, scale, rates, activeRate) {\r\n    const displays = generateDisplay(rates, scale);\r\n\r\n    const displayRates = rates.map((rate, i) => {\r\n      const display = displays[i];\r\n      const active = (rate === activeRate);\r\n\r\n      return (\r\n        <Table.Row key={rate.key} active={active}>\r\n          <Table.Cell>{display}</Table.Cell>\r\n          <Table.Cell>{calculatePrice(rate.rate)}</Table.Cell>\r\n        </Table.Row>\r\n      );\r\n    });\r\n\r\n    return (\r\n      <Table celled unstackable>\r\n        <Table.Header>\r\n          <Table.Row>\r\n            <Table.HeaderCell>{name}</Table.HeaderCell>\r\n            <Table.HeaderCell>Rate per {scale}</Table.HeaderCell>\r\n          </Table.Row>\r\n        </Table.Header>\r\n        <Table.Body>\r\n          {displayRates}\r\n        </Table.Body>\r\n      </Table>\r\n    );\r\n  }\r\n\r\n  renderConfigInfo() {\r\n    const configuration = this.getConfiguration();\r\n    const hasminPrice = this.getTotal().hasminPrice;\r\n\r\n    return (\r\n      <Fragment>\r\n        <Grid columns='equal' stackable>\r\n          <Grid.Column>\r\n            <Header as='h4'>Concrete Rates</Header>\r\n            {this.renderRatesTable('Concrete', util.m2, configuration.concreteRates, this.getCurrentRate())}\r\n            <Header as='h4'>Rock Rates</Header>\r\n            {this.renderRatesTable('Rock', util.m3, configuration.rock, this.getRockRate())}\r\n          </Grid.Column>\r\n          <Grid.Column>\r\n            <Header as='h4'>Extras</Header>\r\n            <Table celled unstackable>\r\n              <Table.Header>\r\n                <Table.Row>\r\n                  <Table.HeaderCell>Name</Table.HeaderCell>\r\n                  <Table.HeaderCell>Amount</Table.HeaderCell>\r\n                </Table.Row>\r\n              </Table.Header>\r\n              <Table.Body>\r\n                {this.renderConfigExtra(\"Slab Thickness 125mm\", configuration.slabThickness125, \"m2\", this.state.slabThickness === slabThickness_125.value)}\r\n                {this.renderConfigExtra(\"Mesh Thickness SL82\", configuration.meshThicknessSL82, \"m2\", this.getMeshThickness() === meshThickness_SL82.value)}\r\n                {this.renderConfigExtra(\"Poly Membrane\", configuration.polyMembraneOn, \"m2\", this.state.polyMembrane === polyMembrane_On.value)}\r\n                {this.renderConfigExtra(\"Pump\", configuration.pumpOn, \"ea\", this.getPump() === pumpOption_On.value)}\r\n                {this.renderConfigExtra(\"Pump (Double)\", configuration.pumpDouble, \"ea\", this.getPump() === pumpOption_Double.value)}\r\n                {this.renderConfigExtra(machineHireOptions.label, configuration.machineHireOn, \"ea\", this.state.machineHire === machineHireOptions.optOn.value)}\r\n                {this.renderConfigExtra(minPriceOptions.label, configuration.minPrice, \"ea\", hasminPrice)}\r\n              </Table.Body>\r\n            </Table>\r\n          </Grid.Column>\r\n        </Grid>\r\n      </Fragment>\r\n    );\r\n  }\r\n\r\n  renderConfigDefaultWarning() {\r\n    return (\r\n      <Message\r\n        warning\r\n        icon='warning sign'\r\n        header='Default Configuration'\r\n        content=\"You're using the Default Configuration. Please create or load configuration before considering the Output.\"\r\n      />\r\n    );\r\n  }\r\n\r\n  renderConfig() {\r\n    const configuration = this.getConfiguration();\r\n    const warning = (configuration.isDefault ? this.renderConfigDefaultWarning() : null);\r\n\r\n    return (\r\n      <Fragment>\r\n        <Header as='h2'>Configuration: {configuration.name}</Header>\r\n        {warning}\r\n        <Form>\r\n          <Form.Group>\r\n            <conf.ConfigurationEditorModal mode='create' configuration={configuration} onSubmit={this.handleConfigurationChange} />\r\n            <conf.LoadConfigurationModal decode={storage.decodeConfiguration} onSubmit={this.handleConfigurationChange} />\r\n            <conf.ShareConfigurationModal shareUrl={storage.getShareConfigurationUrl(configuration)} disabled={configuration.isDefault} />\r\n          </Form.Group>\r\n        </Form>\r\n        {this.renderConfigInfo()}\r\n      </Fragment>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Fragment>\r\n        <Menu inverted borderless style={{ borderRadius: '0' }}>\r\n          <Container>\r\n            <Menu.Item header>\r\n              <Image size='mini' src={logo} style={{ marginRight: '0.5em' }} />\r\n              Concrete App\r\n            </Menu.Item>\r\n          </Container>\r\n        </Menu>\r\n        <Container>\r\n          <Grid centered>\r\n            <Grid.Row>\r\n              <Grid.Column mobile={16} tablet={8} computer={5}>\r\n                {this.renderInput()}\r\n                <Divider />\r\n                {this.renderOutput()}\r\n              </Grid.Column>\r\n            </Grid.Row>\r\n          </Grid>\r\n          <Divider />\r\n          {this.renderConfig()}\r\n        </Container>\r\n        <Footer />\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport default function register() {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Lets check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the old content will have been purged and\r\n              // the fresh content will have been added to the cache.\r\n              // It's the perfect time to display a \"New content is\r\n              // available; please refresh.\" message in your web app.\r\n              console.log('New content is available; please refresh.');\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type').indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport 'semantic-ui-css/semantic.min.css'\r\nimport './index.css';\r\nimport App from './App';\r\nimport { unregister } from './registerServiceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\nunregister();\r\nconsole.log(\"concrete-app: version 7\");"],"sourceRoot":""}